ASxxxx Assembler V02.00 + NoICE + SDCC mods  (STMicroelectronics STM8), page 1.
Hexadecimal [24-Bits]



                                      1 ;;
                                      2 ; Copyright Jacques Deschênes 2019 
                                      3 ; This file is part of PABasic 
                                      4 ;
                                      5 ;     PABasic is free software: you can redistribute it and/or modify
                                      6 ;     it under the terms of the GNU General Public License as published by
                                      7 ;     the Free Software Foundation, either version 3 of the License, or
                                      8 ;     (at your option) any later version.
                                      9 ;
                                     10 ;     PABasic is distributed in the hope that it will be useful,
                                     11 ;     but WITHOUT ANY WARRANTY; without even the implied warranty of
                                     12 ;     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
                                     13 ;     GNU General Public License for more details.
                                     14 ;
                                     15 ;     You should have received a copy of the GNU General Public License
                                     16 ;     along with PABasic.  If not, see <http://www.gnu.org/licenses/>.
                                     17 ;;
                                     18 ;--------------------------------------
                                     19 ;   Implementation of virtual machine for Tiny BASIC
                                     20 ;   REF: https://en.wikipedia.org/wiki/Li-Chen_Wang#Palo_Alto_Tiny_BASIC
                                     21 ;   Palo Alto BASIC is 4th version of TinyBasic
                                     22 ;   DATE: 2019-12-17
                                     23 ;
                                     24 ;--------------------------------------------------
                                     25 ;  X working register
                                     26 ;  Y VM program counter
                                     27 ;  A working register
                                     28 ;  acc16  temporary 
                                     29 ;  ptr16  pointer 
                                     30 ;--------------------------------------------------
                                     31     .module VM1 
                                     32 
                                        	.include "inc/nucleo_8s208.inc"
                                        ;;
                                        ; Copyright Jacques Deschênes 2019 
                                        ; This file is part of MONA 
                                        ;
                                        ;     MONA is free software: you can redistribute it and/or modify
                                        ;     it under the terms of the GNU General Public License as published by
                                        ;     the Free Software Foundation, either version 3 of the License, or
                                        ;     (at your option) any later version.
                                        ;
                                        ;     MONA is distributed in the hope that it will be useful,
                                        ;     but WITHOUT ANY WARRANTY; without even the implied warranty of
                                        ;     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
                                        ;     GNU General Public License for more details.
                                        ;
                                        ;     You should have received a copy of the GNU General Public License
                                        ;     along with MONA.  If not, see <http://www.gnu.org/licenses/>.
                                        ;;
                                        ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                                        ; NUCLEO-8S208RB board specific definitions
                                        ; Date: 2019/10/29
                                        ; author: Jacques Deschênes, copyright 2018,2019
                                        ; licence: GPLv3
                                        ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                                        
                                        ; mcu on board is stm8s208rbt6
                                        
                                        ; crystal on board is 8Mhz
                                 
                                        
                                        ; LED2 is user LED
                                        ; connected to PC5 via Q2 -> 2N7002 MOSFET
                                 
                                 
                                 
                                        
                                        ; B1 on schematic is user button
                                        ; connected to PE4
                                        ; external pullup resistor R6 4k7 and debounce capacitor C5 100nF
                                 
                                 
                                 
                                        
                                        
                                        	.include "inc/stm8s208.inc"
                                        ;;
                                        ; Copyright Jacques Deschênes 2019 
                                        ; This file is part of MONA 
                                        ;
                                        ;     MONA is free software: you can redistribute it and/or modify
                                        ;     it under the terms of the GNU General Public License as published by
                                        ;     the Free Software Foundation, either version 3 of the License, or
                                        ;     (at your option) any later version.
                                        ;
                                        ;     MONA is distributed in the hope that it will be useful,
                                        ;     but WITHOUT ANY WARRANTY; without even the implied warranty of
                                        ;     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
                                        ;     GNU General Public License for more details.
                                        ;
                                        ;     You should have received a copy of the GNU General Public License
                                        ;     along with MONA.  If not, see <http://www.gnu.org/licenses/>.
                                        ;;
                                        ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                                        ; 2019/10/18
                                        ; STM8S208RB µC registers map
                                        ; sdas source file
                                        ; author: Jacques Deschênes, copyright 2018,2019
                                        ; licence: GPLv3
                                        ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                                        	.module stm8s208rb
                                        
                                        ;;;;;;;;;;;;
                                        ; bits
                                        ;;;;;;;;;;;;
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                         	
                                        ;;;;;;;;;;;;
                                        ; bits masks
                                        ;;;;;;;;;;;;
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; HSI oscillator frequency 16Mhz
                                 
                                        ; LSI oscillator frequency 128Khz
                                 
                                        
                                        ; controller memory regions
                                 
                                 
                                        ; STM8S208RB have 128K flash
                                 
                                        ; erase block size 
                                 
                                        
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; options bytes
                                        ; this one can be programmed only from SWIM  (ICP)
                                 
                                        ; these can be programmed at runtime (IAP)
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        ; option registers usage
                                        ; read out protection, value 0xAA enable ROP
                                 
                                        ; user boot code, {0..0x3e} 512 bytes row
                                 
                                 
                                        ; alternate function register
                                 
                                 
                                        ; miscelinous options
                                 
                                 
                                        ; clock options
                                 
                                 
                                        ; HSE clock startup delay
                                 
                                 
                                        ; flash wait state
                                 
                                 
                                        
                                        ; watchdog options bits
                                 
                                 
                                 
                                 
                                        ; NWDGOPT bits
                                 
                                 
                                 
                                 
                                        
                                        ; CLKOPT bits
                                 
                                 
                                 
                                 
                                        
                                        ; AFR option, remapable functions
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; device ID = (read only)
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        
                                 
                                 
                                        ; PORTS SFR OFFSET
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; GPIO
                                        ; gpio register offset to base
                                 
                                 
                                 
                                 
                                 
                                 
                                         
                                        ; port A
                                 
                                 
                                 
                                 
                                 
                                 
                                        ; port B
                                 
                                 
                                 
                                 
                                 
                                 
                                        ; port C
                                 
                                 
                                 
                                 
                                 
                                 
                                        ; port D
                                 
                                 
                                 
                                 
                                 
                                 
                                        ; port E
                                 
                                 
                                 
                                 
                                 
                                 
                                        ; port F
                                 
                                 
                                 
                                 
                                 
                                 
                                        ; port G
                                 
                                 
                                 
                                 
                                 
                                 
                                        ; port H not present on LQFP48/LQFP64 package
                                 
                                 
                                 
                                 
                                 
                                 
                                        ; port I ; only bit 0 on LQFP64 package, not present on LQFP48
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; input modes CR1
                                 
                                 
                                        ; output mode CR1
                                 
                                 
                                        ; input modes CR2
                                 
                                 
                                        ; output speed CR2
                                 
                                 
                                        
                                        
                                        ; Flash memory
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        ; data memory unlock keys
                                 
                                 
                                        ; flash memory unlock keys
                                 
                                 
                                        ; FLASH_CR1 bits
                                 
                                 
                                 
                                 
                                        ; FLASH_CR2 bits
                                 
                                 
                                 
                                 
                                 
                                        ; FLASH_FPR bits
                                 
                                 
                                 
                                 
                                 
                                 
                                        ; FLASH_NFPR bits
                                 
                                 
                                 
                                 
                                 
                                 
                                        ; FLASH_IAPSR bits
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; Interrupt control
                                 
                                 
                                        
                                        ; Reset Status
                                 
                                        
                                        ; Clock Registers
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; Peripherals clock gating
                                        ; CLK_PCKENR1 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        ; CLK_PCKENR2
                                 
                                 
                                 
                                        
                                        ; Clock bits
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                 
                                 
                                        ; clock source
                                 
                                 
                                 
                                        
                                 
                                 
                                 
                                 
                                        
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; Watchdog
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; Beeper
                                        ; beeper output is alternate function AFR7 on PD4
                                        ; connected to CN9-6
                                 
                                 
                                 
                                 
                                        
                                        ; SPI
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; I2C
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                 
                                 
                                 
                                        
                                 
                                 
                                 
                                 
                                 
                                        
                                 
                                        
                                 
                                 
                                        
                                 
                                 
                                 
                                 
                                        
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                 
                                 
                                 
                                 
                                 
                                        
                                 
                                 
                                 
                                 
                                 
                                        
                                 
                                 
                                 
                                        
                                        ; Precalculated values, all in KHz
                                 
                                 
                                        ;
                                        ; Fast I2C mode max rise time = 300ns
                                        ; I2C_FREQR = 16 = (MHz) => tMASTER = 1/16 = 62.5 ns
                                        ; TRISER = = (300/62.5) + 1 = floor(4.8) + 1 = 5.
                                        
                                 
                                        
                                 
                                 
                                 
                                        
                                 
                                 
                                 
                                        
                                 
                                 
                                        ;
                                        ; Standard I2C mode max rise time = 1000ns
                                        ; I2C_FREQR = 16 = (MHz) => tMASTER = 1/16 = 62.5 ns
                                        ; TRISER = = (1000/62.5) + 1 = floor(16) + 1 = 17.
                                        
                                 
                                        
                                 
                                 
                                 
                                        
                                 
                                 
                                 
                                        
                                 
                                 
                                        
                                        ; baudrate constant for brr_value table access
                                        ; to be used by uart_init 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; UART registers offset from
                                        ; base address 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; uart identifier
                                        ; to be used by uart_init
                                 
                                 
                                        
                                        ; pins used by uart 
                                 
                                 
                                 
                                 
                                        ; uart port base address 
                                 
                                 
                                        
                                        ; UART1 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; UART3
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; UART Status Register bits
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; Uart Control Register bits
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                 
                                 
                                 
                                 
                                 
                                        ; LIN mode config register
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; TIMERS
                                        ; Timer 1 - 16-bit timer with complementary PWM outputs
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; Timer Control Register bits
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; Timer Slave Mode Control bits
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; Timer External Trigger Enable bits
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; Timer Interrupt Enable bits
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; Timer Status Register bits
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                 
                                 
                                 
                                 
                                        
                                        ; Timer Event Generation Register bits
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; Capture/Compare Mode Register 1 - channel configured in output
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; Capture/Compare Mode Register 1 - channel configured in input
                                 
                                 
                                 
                                 
                                 
                                 
                                        ;  TIM1_CCMR1_CC1S1 = (1)
                                 
                                        
                                        ; Capture/Compare Mode Register 2 - channel configured in output
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; Capture/Compare Mode Register 2 - channel configured in input
                                 
                                 
                                 
                                 
                                 
                                 
                                        ;  TIM1_CCMR2_CC2S1 = (1)
                                 
                                        
                                        ; Capture/Compare Mode Register 3 - channel configured in output
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; Capture/Compare Mode Register 3 - channel configured in input
                                 
                                 
                                 
                                 
                                 
                                 
                                        ;  TIM1_CCMR3_CC3S1 = (1)
                                 
                                        
                                        ; Capture/Compare Mode Register 4 - channel configured in output
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; Capture/Compare Mode Register 4 - channel configured in input
                                 
                                 
                                 
                                 
                                 
                                 
                                        ;  TIM1_CCMR4_CC4S1 = (1)
                                 
                                        
                                        ; Timer 2 - 16-bit timer
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; Timer 3
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; TIM3_CR1  fields
                                 
                                 
                                 
                                 
                                 
                                        ; TIM3_CCR2  fields
                                 
                                 
                                 
                                        ; TIM3_CCER1 fields
                                 
                                 
                                 
                                 
                                        ; TIM3_CCER2 fields
                                 
                                 
                                        
                                        ; Timer 4
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; Timer 4 bitmasks
                                        
                                 
                                 
                                 
                                 
                                 
                                        
                                 
                                        
                                 
                                        
                                 
                                        
                                 
                                 
                                 
                                        
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; ADC2
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                         
                                        ; ADC bitmasks
                                        
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                 
                                 
                                 
                                 
                                 
                                        
                                 
                                 
                                 
                                 
                                 
                                        
                                 
                                 
                                        
                                        ; beCAN
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        
                                        ; CPU
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; global configuration register
                                 
                                 
                                 
                                        
                                        ; interrupt control registers
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; SWIM, control and status register
                                 
                                        ; debug registers
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; Interrupt Numbers
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; Interrupt Vectors
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                        ; Condition code register bits
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        	.include "inc/ascii.inc"
                                        ;;
                                        ; Copyright Jacques Deschênes 2019 
                                        ; This file is part of MONA 
                                        ;
                                        ;     MONA is free software: you can redistribute it and/or modify
                                        ;     it under the terms of the GNU General Public License as published by
                                        ;     the Free Software Foundation, either version 3 of the License, or
                                        ;     (at your option) any later version.
                                        ;
                                        ;     MONA is distributed in the hope that it will be useful,
                                        ;     but WITHOUT ANY WARRANTY; without even the implied warranty of
                                        ;     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
                                        ;     GNU General Public License for more details.
                                        ;
                                        ;     You should have received a copy of the GNU General Public License
                                        ;     along with MONA.  If not, see <http://www.gnu.org/licenses/>.
                                        ;;
                                        
                                        ;-------------------------------------------------------
                                        ;     ASCII control  values
                                        ;     CTRL_x   are VT100 keyboard values  
                                        ;-------------------------------------------------------
                                 
                                 
                                 
                                 
                                 
                                 
                                        
                                 
                                 
                                        
                                 
                                 
                                        
                                 
                                 
                                        
                                 
                                 
                                        
                                 
                                 
                                        
                                 
                                 
                                        
                                 
                                 
                                        
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                        	.include "inc/gen_macros.inc" 
                                        ;;
                                        ; Copyright Jacques Deschênes 2019 
                                        ; This file is part of STM8_NUCLEO 
                                        ;
                                        ;     STM8_NUCLEO is free software: you can redistribute it and/or modify
                                        ;     it under the terms of the GNU General Public License as published by
                                        ;     the Free Software Foundation, either version 3 of the License, or
                                        ;     (at your option) any later version.
                                        ;
                                        ;     STM8_NUCLEO is distributed in the hope that it will be useful,
                                        ;     but WITHOUT ANY WARRANTY; without even the implied warranty of
                                        ;     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
                                        ;     GNU General Public License for more details.
                                        ;
                                        ;     You should have received a copy of the GNU General Public License
                                        ;     along with STM8_NUCLEO.  If not, see <http://www.gnu.org/licenses/>.
                                        ;;
                                        ;--------------------------------------
                                        ;   console Input/Output module
                                        ;   DATE: 2019-12-11
                                        ;    
                                        ;   General usage macros.   
                                        ;
                                        ;--------------------------------------
                                        
                                            ; reserve space on stack
                                            ; for local variabls
                                            .macro _vars n 
                                            
                                            ; free space on stack
                                            .macro _drop n 
                                        
                                            ; declare ARG_OFS for arguments 
                                            ; displacement on stack. This 
                                            ; value depend on local variables 
                                            ; size.
                                            .macro _argofs n 
                                        
                                            ; declare a function argument 
                                            ; position relative to stack pointer 
                                            ; _argofs must be called before it.
                                            .macro _arg name ofs 
                                        ;	.include "pab_macros.inc" 
                                            .include "bytecode.inc"
                                        ;;
                                        ; Copyright Jacques Deschênes 2019 
                                        ; This file is part of PABasic 
                                        ;
                                        ;     PABasic is free software: you can redistribute it and/or modify
                                        ;     it under the terms of the GNU General Public License as published by
                                        ;     the Free Software Foundation, either version 3 of the License, or
                                        ;     (at your option) any later version.
                                        ;
                                        ;     PABasic is distributed in the hope that it will be useful,
                                        ;     but WITHOUT ANY WARRANTY; without even the implied warranty of
                                        ;     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
                                        ;     GNU General Public License for more details.
                                        ;
                                        ;     You should have received a copy of the GNU General Public License
                                        ;     along with PABasic.  If not, see <http://www.gnu.org/licenses/>.
                                        ;;
                                        ;--------------------------------------
                                        
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                     40     .list 
                                     41 
                                     42 ;_dbg 
                                     43 
                                     44 ;--------------------------------------
                                     45     .area DATA 
                                     46 ;--------------------------------------	
                           000001    47     TOS=1 ; offset top of stack 
                           000003    48     N=3 ; offset second element on stack
                           000002    49     CELLL=2 ; cell length  2 bytes 
                                     50 
                           000050    51 	TIB_SIZE=80
                           000028    52     PAD_SIZE=40
                                     53 ;	DSTACK_SIZE=64 
                           0000C0    54 	STACK_SIZE= 192 ;128
                           0017FF    55 	STACK_EMPTY=RAM_SIZE-1  
                           000000    56 	FRUN=0 ; flags run code in variable flags
                           000001    57 	FTRAP=1 ; inside trap handler 
                           000002    58 	FFOR=2 ; FOR loop in preparation 
                           000003    59 	FSLEEP=3 ; halt produit par la commande SLEEP 
                           000004    60 	FBREAK=4 ; break point flag 
                           000005    61 	FCOMP=5  ; compiling flags 
                                     62 
      000000                         63 in.w:  .blkb 1 ; parser position in text line
      000001                         64 in:    .blkb 1 ; low byte of in.w
      000002                         65 count: .blkb 1 ; length of string in text line  
      000003                         66 basicptr:  .blkb 2  ; point to text buffer 
      000005                         67 lineno: .blkb 2  ; BASIC line number 
      000007                         68 base:  .blkb 1 ; nemeric base used to print integer 
      000008                         69 tos: .blkw 1 ; top of stack element 
      00000A                         70 acc24: .blkb 1 ; 24 accumulator
      00000B                         71 acc16: .blkb 1
      00000C                         72 acc8:  .blkb 1
      00000D                         73 ticks: .blkw 1 ; milliseconds ticks counter (see Timer4UpdateHandler)
      00000F                         74 seedx: .blkw 1  ; xorshift 16 seed x 
      000011                         75 seedy: .blkw 1  ; xorshift 16 seed y 
      000013                         76 in.w.saved: .blkw 1 ; set by get_token before parsing next token, used by unget_token
      000015                         77 farptr: .blkb 1 ; far pointer used by file system
      000016                         78 ptr16:  .blkb 1 ; middle byte of farptr
      000017                         79 ptr8:   .blkb 1 ; least byte of farptr 
      000018                         80 ffree: .blkb 3 ; flash free address ; file system free space pointer
      00001B                         81 dstkptr: .blkw 1  ; data stack pointer 
      00001D                         82 txtbgn: .ds 2 ; BASIC text beginning address 
      00001F                         83 txtend: .ds 2 ; BASIC text end address 
      000021                         84 loop_depth: .ds 1 ; FOR loop depth, level of nested loop.  
      000022                         85 array_addr: .ds 2 ; address of @ array 
      000024                         86 array_size: .ds 2 ; array size 
      000026                         87 flags: .ds 1 ; boolean flags
      000027                         88 tab_width: .ds 1 ; print colon width (4)
      000028                         89 vars: .ds 2*26 ; BASIC variables A-Z, keep it as but last .
                                     90 ; keep as last variable 
      00005C                         91 free_ram: ; from here RAM free for BASIC text 
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (STMicroelectronics STM8), page 2.
Hexadecimal [24-Bits]



                                     92 
                                     93 ;-----------------------------------
                                     94     .area SSEG (ABS)
                                     95 ;-----------------------------------	
      0016C8                         96     .org RAM_SIZE-STACK_SIZE-TIB_SIZE-PAD_SIZE ;-DSTACK_SIZE 
      0016C8                         97 tib: .ds TIB_SIZE             ; transaction input buffer
      001718                         98 pad: .ds PAD_SIZE             ; working buffer
                                     99 ;dstack: .ds DSTACK_SIZE 	  ; data stack used by FOR...NEXT 
                                    100 ;dstack_unf: ; dstack underflow ; data stack bottom 
      001740                        101 stack_full: .ds STACK_SIZE   ; control stack 
      001800                        102 stack_unf: ; stack underflow ; control_stack bottom 
                                    103 
                                    104 
                                    105 ;--------------------------------------
                                    106     .area HOME 
                                    107 ;--------------------------------------
                           000000   108     DEBUG=0
      000000 82 00 03 6F            109     int cold_start
                           000000   110 .if DEBUG
                                    111 	int TrapHandler 		;TRAP  software interrupt
                           000001   112 .else
      000004 82 00 00 00            113 	int NonHandledInterrupt ;TRAP  software interrupt
                                    114 .endif
      000008 82 00 00 00            115 	int NonHandledInterrupt ;int0 TLI   external top level interrupt
      00000C 82 00 00 00            116 	int NonHandledInterrupt ;int1 AWU   auto wake up from halt
      000010 82 00 00 00            117 	int NonHandledInterrupt ;int2 CLK   clock controller
      000014 82 00 00 00            118 	int NonHandledInterrupt ;int3 EXTI0 gpio A external interrupts
      000018 82 00 00 00            119 	int NonHandledInterrupt ;int4 EXTI1 gpio B external interrupts
      00001C 82 00 00 00            120 	int NonHandledInterrupt ;int5 EXTI2 gpio C external interrupts
      000020 82 00 00 00            121 	int NonHandledInterrupt ;int6 EXTI3 gpio D external interrupts
      000024 82 00 00 0D            122 	int UserButtonHandler   ;int7 EXTI4 gpio E external interrupts
      000028 82 00 00 00            123 	int NonHandledInterrupt ;int8 beCAN RX interrupt
      00002C 82 00 00 00            124 	int NonHandledInterrupt ;int9 beCAN TX/ER/SC interrupt
      000030 82 00 00 00            125 	int NonHandledInterrupt ;int10 SPI End of transfer
      000034 82 00 00 00            126 	int NonHandledInterrupt ;int11 TIM1 update/overflow/underflow/trigger/break
      000038 82 00 00 00            127 	int NonHandledInterrupt ;int12 TIM1 capture/compare
      00003C 82 00 00 00            128 	int NonHandledInterrupt ;int13 TIM2 update /overflow
      000040 82 00 00 00            129 	int NonHandledInterrupt ;int14 TIM2 capture/compare
      000044 82 00 00 00            130 	int NonHandledInterrupt ;int15 TIM3 Update/overflow
      000048 82 00 00 00            131 	int NonHandledInterrupt ;int16 TIM3 Capture/compare
      00004C 82 00 00 00            132 	int NonHandledInterrupt ;int17 UART1 TX completed
      000050 82 00 00 00            133 	int NonHandledInterrupt ;int18 UART1 RX full
      000054 82 00 00 00            134 	int NonHandledInterrupt ;int19 I2C 
      000058 82 00 00 00            135 	int NonHandledInterrupt ;int20 UART3 TX completed
      00005C 82 00 00 00            136 	int NonHandledInterrupt ;int21 UART3 RX full
      000060 82 00 00 00            137 	int NonHandledInterrupt ;int22 ADC2 end of conversion
      000064 82 00 00 01            138 	int Timer4UpdateHandler	;int23 TIM4 update/overflow used as msec ticks counter
      000068 82 00 00 00            139 	int NonHandledInterrupt ;int24 flash writing EOP/WR_PG_DIS
      00006C 82 00 00 00            140 	int NonHandledInterrupt ;int25  not used
      000070 82 00 00 00            141 	int NonHandledInterrupt ;int26  not used
      000074 82 00 00 00            142 	int NonHandledInterrupt ;int27  not used
      000078 82 00 00 00            143 	int NonHandledInterrupt ;int28  not used
      00007C 82 00 00 00            144 	int NonHandledInterrupt ;int29  not used
                                    145 
                                    146 ;---------------------------------------
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (STMicroelectronics STM8), page 3.
Hexadecimal [24-Bits]



                                    147     .area CODE
                                    148 ;---------------------------------------
                           000000   149 .if DEBUG
                                    150 .asciz "VM1" ; I like to put module name here.
                                    151 .endif 
                                    152 
      000000                        153 NonHandledInterrupt:
      000000 71                     154     .byte 0x71  ; reinitialize MCU
                                    155 
                                    156 
                                    157 ;------------------------------------
                                    158 ; software interrupt handler  
                                    159 ;------------------------------------
                           000000   160 .if DEBUG 
                                    161 TrapHandler:
                                    162 	bset flags,#FTRAP 
                                    163 	call print_registers
                                    164 	call cmd_itf
                                    165 	bres flags,#FTRAP 	
                                    166 	iret
                                    167 .endif 
                                    168 
      000001                        169 Timer4UpdateHandler:
      000001 72 5F 53 42      [ 1]  170 	clr TIM4_SR 
      000005 CE 00 0D         [ 2]  171 	ldw x,ticks
      000008 5C               [ 1]  172 	incw x
      000009 CF 00 0D         [ 2]  173 	ldw ticks,x 
      00000C 80               [11]  174 	iret 
                                    175 
                                    176 
                                    177 ;------------------------------------
                                    178 ; Triggered by pressing USER UserButton 
                                    179 ; on NUCLEO card.
                                    180 ;------------------------------------
      00000D                        181 UserButtonHandler:
                           000000   182 .if DEBUG
                                    183 ; wait button release
                                    184 	clrw x
                                    185 1$: decw x 
                                    186 	jrne 1$
                                    187 	btjf USR_BTN_PORT,#USR_BTN_BIT, 1$
                                    188 ; if MCU suspended by SLEEP resume program
                                    189     btjf flags,#FSLEEP,2$
                                    190 	bres flags,#FSLEEP 
                                    191 	iret
                                    192 2$:	btjt flags,#FRUN,4$
                                    193 	jp 9$ 
                                    194 4$:	; program interrupted by user 
                                    195 	bres flags,#FRUN 
                                    196 	ldw x,#USER_ABORT
                                    197 	call puts 
                                    198 	ldw x,basicptr
                                    199 	ldw x,(x)
                                    200 ; print line number 
                                    201 	mov base,#10 
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (STMicroelectronics STM8), page 4.
Hexadecimal [24-Bits]



                                    202 	mov tab_width,#6
                                    203 	call print_int  	
                                    204 	ldw x,basicptr 
                                    205 	addw x,#3  
                                    206 	call puts 
                                    207 	ld a,#CR 
                                    208 	call putc
                                    209 	clrw x  
                                    210 	ld a,in 
                                    211 	add a,#3 ; adjustment for line number display 
                                    212 	ld xl,a 
                                    213 	call spaces 
                                    214 	ld a,#'^
                                    215 	call putc 
                                    216 9$:
                                    217     ldw x,#STACK_EMPTY 
                                    218     ldw sp,x
                                    219 	rim 
                                    220 	jp warm_start
                           000001   221 .else
      00000D 80               [11]  222     iret 
                                    223 .endif 
                                    224 
      00000E 0A 50 72 6F 67 72 61   225 USER_ABORT: .asciz "\nProgram aborted by user.\n"
             6D 20 61 62 6F 72 74
             65 64 20 62 79 20 75
             73 65 72 2E 0A 00
                                    226 
                                    227 
                                    228 ;----------------------------------------
                                    229 ; inialize MCU clock 
                                    230 ; input:
                                    231 ;   A 		source  HSI | 1 HSE 
                                    232 ;   XL      CLK_CKDIVR , clock divisor 
                                    233 ; output:
                                    234 ;   none 
                                    235 ;----------------------------------------
      000029                        236 clock_init:	
      000029 C1 50 C3         [ 1]  237 	cp a,CLK_CMSR 
      00002C 27 0C            [ 1]  238 	jreq 2$ ; no switching required 
                                    239 ; select clock source 
      00002E 72 12 50 C5      [ 1]  240 	bset CLK_SWCR,#CLK_SWCR_SWEN
      000032 C7 50 C4         [ 1]  241 	ld CLK_SWR,a
      000035 C1 50 C3         [ 1]  242 1$:	cp a,CLK_CMSR
      000038 26 FB            [ 1]  243 	jrne 1$
      00003A                        244 2$: 	
                                    245 ; HSI and cpu clock divisor 
      00003A 9F               [ 1]  246 	ld a,xl 
      00003B C7 50 C6         [ 1]  247 	ld CLK_CKDIVR,a  
      00003E 81               [ 4]  248 	ret
                                    249 
                                    250 ;---------------------------------
                                    251 ; TIM4 is configured to generate an 
                                    252 ; interrupt every millisecond 
                                    253 ;----------------------------------
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (STMicroelectronics STM8), page 5.
Hexadecimal [24-Bits]



      00003F                        254 timer4_init:
      00003F 35 07 53 45      [ 1]  255 	mov TIM4_PSCR,#7 ; prescale 128  
      000043 35 7D 53 46      [ 1]  256 	mov TIM4_ARR,#125 ; set for 1msec.
      000047 35 05 53 40      [ 1]  257 	mov TIM4_CR1,#((1<<TIM4_CR1_CEN)|(1<<TIM4_CR1_URS))
      00004B 72 10 53 41      [ 1]  258 	bset TIM4_IER,#TIM4_IER_UIE 
      00004F 81               [ 4]  259 	ret
                                    260 
                                    261 ;---------------------------------------------
                                    262 ;   UART3 subroutines
                                    263 ;---------------------------------------------
                                    264 
                                    265 ;---------------------------------------------
                                    266 ; initialize UART3, 115200 8N1
                                    267 ; input:
                                    268 ;	none
                                    269 ; output:
                                    270 ;   none
                                    271 ;---------------------------------------------
      000050                        272 uart3_init:
                                    273 	; configure tx pin
      000050 72 1A 50 11      [ 1]  274 	bset PD_DDR,#BIT5 ; tx pin
      000054 72 1A 50 12      [ 1]  275 	bset PD_CR1,#BIT5 ; push-pull output
      000058 72 1A 50 13      [ 1]  276 	bset PD_CR2,#BIT5 ; fast output
      00005C                        277 uart3_set_baud: 
                                    278 ; baud rate 115200 Fmaster=8Mhz  8000000/115200=69=0x45
                                    279 ; 1) check clock source, HSI at 16Mhz or HSE at 8Mhz  
      00005C A6 E1            [ 1]  280 	ld a,#CLK_SWR_HSI
      00005E C1 50 C3         [ 1]  281 	cp a,CLK_CMSR 
      000061 27 0A            [ 1]  282 	jreq hsi_clock 
      000063                        283 hse_clock: ; 8 Mhz 	
      000063 35 05 52 43      [ 1]  284 	mov UART3_BRR2,#0x05 ; must be loaded first
      000067 35 04 52 42      [ 1]  285 	mov UART3_BRR1,#0x4
      00006B 20 08            [ 2]  286 	jra uart_enable
      00006D                        287 hsi_clock: ; 16 Mhz 	
      00006D 35 0B 52 43      [ 1]  288 	mov UART3_BRR2,#0x0b ; must be loaded first
      000071 35 08 52 42      [ 1]  289 	mov UART3_BRR1,#0x08
      000075                        290 uart_enable:
      000075 72 5F 52 41      [ 1]  291     clr UART3_DR
      000079 35 0C 52 45      [ 1]  292 	mov UART3_CR2,#((1<<UART_CR2_TEN)|(1<<UART_CR2_REN));
      00007D 72 10 52 45      [ 1]  293 	bset UART3_CR2,#UART_CR2_SBK
      000081 72 0D 52 40 FB   [ 2]  294     btjf UART3_SR,#UART_SR_TC,.
      000086 81               [ 4]  295     ret
                                    296 	
                                    297 ;---------------------------------
                                    298 ; send character to UART3 
                                    299 ; input:
                                    300 ;   A 
                                    301 ; output:
                                    302 ;   none 
                                    303 ;--------------------------------	
      000087                        304 putchar:
      000087 72 0F 52 40 FB   [ 2]  305     btjf UART3_SR,#UART_SR_TXE,.
      00008C C7 52 41         [ 1]  306 	ld UART3_DR,a 
      00008F 81               [ 4]  307 	ret  
                                    308 
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (STMicroelectronics STM8), page 6.
Hexadecimal [24-Bits]



                                    309 ;---------------------------------
                                    310 ; send .asciz to uart3
                                    311 ; input:
                                    312 ;   X       pointer to string
                                    313 ; output:
                                    314 ;   none:
                                    315 ;----------------------------------
      000090                        316 puts: 
      000090 F6               [ 1]  317     ld a,(x)
      000091 27 06            [ 1]  318     jreq 9$
      000093 CD 00 87         [ 4]  319     call putchar 
      000096 5C               [ 1]  320     incw x 
      000097 20 F7            [ 2]  321     jra puts
      000099 5C               [ 1]  322 9$: incw x 
      00009A 81               [ 4]  323     ret 
                                    324 
                                    325 
                                    326 ;---------------------------------
                                    327 ; wait character from UART3 
                                    328 ; input:
                                    329 ;   none
                                    330 ; output:
                                    331 ;   A 			char  
                                    332 ;--------------------------------	
      00009B                        333 getchar:
      00009B 72 0B 52 40 FB   [ 2]  334 	btjf UART3_SR,#UART_SR_RXNE,.
      0000A0 C6 52 41         [ 1]  335 	ld a,UART3_DR 
      0000A3 81               [ 4]  336     ret 
                                    337 
                                    338 ;---------------------------
                                    339 ; delete character at left 
                                    340 ; of cursor on terminal 
                                    341 ; input:
                                    342 ;   none 
                                    343 ; output:
                                    344 ;	none 
                                    345 ;---------------------------
      0000A4                        346 bksp:
      0000A4 A6 08            [ 1]  347 	ld a,#BSP 
      0000A6 CD 00 87         [ 4]  348 	call putchar 
      0000A9 A6 20            [ 1]  349 	ld a,#SPACE 
      0000AB CD 00 87         [ 4]  350 	call putchar 
      0000AE A6 08            [ 1]  351 	ld a,#BSP 
      0000B0 CD 00 87         [ 4]  352 	call putchar 
      0000B3 81               [ 4]  353 	ret 
                                    354 
                                    355 ;----------------------------
                                    356 ; multiply 2 unsigned 16 bits integer 
                                    357 ; input:
                                    358 ;   U1     on stack 
                                    359 ;   U2     on stack 
                                    360 ; output:  
                                    361 ;   U1   overflow  
                                    362 ;   U2   product
                                    363 ;-----------------------------------
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (STMicroelectronics STM8), page 7.
Hexadecimal [24-Bits]



      0000B4                        364         _argofs 0 
                           000002     1     ARG_OFS=2+0 
      0000B4                        365         _arg U1 1 
                           000003     1     U1=ARG_OFS+1 
      0000B4                        366         _arg U2 3
                           000005     1     U2=ARG_OFS+3 
      0000B4                        367 mul16u:
      0000B4 72 5F 00 16      [ 1]  368     clr ptr16
      0000B8 7B 04            [ 1]  369     ld a,(U1+1,sp)
      0000BA 1E 05            [ 2]  370     ldw x,(U2,sp)
      0000BC 42               [ 4]  371     mul x,a 
      0000BD CF 00 0B         [ 2]  372     ldw acc16,x
      0000C0 1E 05            [ 2]  373     ldw x,(U2,sp)
      0000C2 5E               [ 1]  374     swapw x 
      0000C3 42               [ 4]  375     mul x,a 
      0000C4 4F               [ 1]  376     clr a 
      0000C5 02               [ 1]  377     rlwa x
      0000C6 C7 00 17         [ 1]  378     ld ptr8,a 
      0000C9 72 BB 00 0B      [ 2]  379     addw x,acc16 
      0000CD 24 04            [ 1]  380     jrnc 2$
      0000CF 72 5C 00 17      [ 1]  381     inc ptr8 
      0000D3 CF 00 0B         [ 2]  382 2$: ldw acc16,x 
      0000D6 7B 03            [ 1]  383     ld a,(U1,sp)
      0000D8 1E 05            [ 2]  384     ldw x,(U2,sp)
      0000DA 42               [ 4]  385     mul x,a 
      0000DB 02               [ 1]  386     rlwa x 
      0000DC CB 00 17         [ 1]  387     add a,ptr8 
      0000DF 24 04            [ 1]  388     jrnc 4$
      0000E1 72 5C 00 16      [ 1]  389     inc ptr16 
      0000E5 C7 00 17         [ 1]  390 4$: ld ptr8,a 
      0000E8 72 BB 00 0B      [ 2]  391     addw x,acc16
      0000EC 24 0A            [ 1]  392     jrnc 6$
      0000EE 72 5C 00 17      [ 1]  393     inc ptr8 
      0000F2 24 04            [ 1]  394     jrnc 6$
      0000F4 72 5C 00 16      [ 1]  395     inc ptr16
      0000F8 7B 03            [ 1]  396 6$: ld a,(U1,sp)
      0000FA 1E 05            [ 2]  397     ldw x,(U2,sp)
      0000FC 5E               [ 1]  398     swapw x 
      0000FD 42               [ 4]  399     mul x,a 
      0000FE 72 BB 00 16      [ 2]  400     addw x,ptr16 
      000102 1F 03            [ 2]  401     ldw (U1,sp),x 
      000104 CE 00 0B         [ 2]  402     ldw x,acc16 
      000107 1F 05            [ 2]  403     ldw (U2,sp),x
      000109 81               [ 4]  404     ret 
                                    405 
                                    406 ;-----------------------------------
                                    407 ; print a 16 bit integer 
                                    408 ; using variable 'base' as conversion
                                    409 ; format.
                                    410 ; input:
                                    411 ;   X       integer to print 
                                    412 ;   base    conversion base 
                                    413 ; output:
                                    414 ;   none 
                                    415 ;-----------------------------------
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (STMicroelectronics STM8), page 8.
Hexadecimal [24-Bits]



                           000001   416 	SIGN=1
                           000002   417     YSAVE=2
                           000003   418 	VSIZE=3
      00010A                        419 print_int: 
      00010A                        420 	_vars VSIZE
      00010A 52 03            [ 2]    1     sub sp,#VSIZE 
      00010C 17 02            [ 2]  421     ldw (YSAVE,sp),y 
      00010E 0F 01            [ 1]  422 	clr (SIGN,sp)
      000110 90 AE 17 3F      [ 2]  423 	ldw y,#pad+PAD_SIZE-1 
      000114 90 7F            [ 1]  424 	clr (y)
      000116 C6 00 07         [ 1]  425 	ld a,base  
      000119 A1 0A            [ 1]  426 	cp a,#10 
      00011B 26 06            [ 1]  427 	jrne 1$ 
      00011D 5D               [ 2]  428 	tnzw x 
      00011E 2A 03            [ 1]  429 	jrpl 1$ 
      000120 03 01            [ 1]  430 	cpl (SIGN,sp)
      000122 50               [ 2]  431 	negw x 	 
      000123                        432 1$:	
      000123 C6 00 07         [ 1]  433 	ld a,base 
      000126 62               [ 2]  434 	div x,a 
      000127 AB 30            [ 1]  435 	add a,#'0 
      000129 A1 3A            [ 1]  436 	cp a,#'9+1 
      00012B 2B 02            [ 1]  437 	jrmi 2$ 
      00012D AB 07            [ 1]  438 	add a,#7 
      00012F 90 5A            [ 2]  439 2$: decw y 
      000131 90 F7            [ 1]  440 	ld (y),a 
      000133 5D               [ 2]  441 	tnzw x 
      000134 26 ED            [ 1]  442 	jrne 1$ 
      000136 A6 10            [ 1]  443 	ld a,#16 
      000138 C1 00 07         [ 1]  444 	cp a,base 
      00013B 26 08            [ 1]  445 	jrne 3$
      00013D A6 24            [ 1]  446 	ld a,#'$
      00013F 90 5A            [ 2]  447 	decw y  
      000141 90 F7            [ 1]  448 	ld (y),a
      000143 20 0A            [ 2]  449 	jra 9$ 
      000145 0D 01            [ 1]  450 3$: tnz (SIGN,sp)
      000147 27 06            [ 1]  451 	jreq 9$ 
      000149 A6 2D            [ 1]  452 	ld a,#'-
      00014B 90 5A            [ 2]  453 	decw y  
      00014D 90 F7            [ 1]  454 	ld (y),a
      00014F                        455 9$:	
      00014F AE 17 3F         [ 2]  456 	ldw x,#pad+PAD_SIZE-1
      000152 90 CF 00 0B      [ 2]  457     ldw acc16,y
      000156 72 B0 00 0B      [ 2]  458     subw x,acc16 
      00015A                        459 10$:
      00015A 90 5A            [ 2]  460 	decw y 
      00015C A6 20            [ 1]  461 	ld a,#SPACE 
      00015E 90 F7            [ 1]  462 	ld (y),a
      000160 5C               [ 1]  463 	incw x 
      000161 9F               [ 1]  464 	ld a,xl 
      000162 C1 00 27         [ 1]  465 	cp a,tab_width
      000165 2B F3            [ 1]  466 	jrmi 10$ 
      000167                        467 12$:
      000167 93               [ 1]  468     ldw x,y 
      000168 CD 00 90         [ 4]  469 	call puts 
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (STMicroelectronics STM8), page 9.
Hexadecimal [24-Bits]



      00016B 16 02            [ 2]  470     ldw y,(YSAVE,sp) 
      00016D                        471 	_drop VSIZE 
      00016D 5B 03            [ 2]    1     addw sp,#VSIZE 
      00016F 81               [ 4]  472 	ret 
                                    473 
                                    474 
                                    475 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                                    476 ; VM code routine address
                                    477 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
      000170 01 C1 01 ED 01 FD 02   478 bytecode: .word bye,subr,exit,exec,branch,zbranch,emit,key,qkey,dotq,delete
             02 02 09 02 15 01 E5
             01 CB 01 D4 02 20 02
             27
      000186 02 34 02 43 02 4A 02   479         .word spaces,prtos,lit,litc,fetch,cfetch,store,cstore,rot,nrot
             58 02 62 02 6A 02 74
             02 83 02 93 02 A8
      00019A 02 BD 02 C2 02 C8 03   480         .word drop,dup,swap,over,neg,zlt,plus,minus,slash,mod,staru,star
             14 03 1A 03 22 02 D9
             02 E2 02 EE 02 FD 03
             0C 03 2F
      0001B2 03 61 03 68            481         .word decim,hexa
                                    482 
                                    483 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                                    484 ;  bytecode interpreter 
                                    485 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
      0001B6                        486 next: ; vm instruction fetch 
      0001B6 90 F6            [ 1]  487     ld a,(y)
      0001B8 90 5C            [ 1]  488     incw y
      0001BA 48               [ 1]  489     sll a 
      0001BB 5F               [ 1]  490     clrw x 
      0001BC 97               [ 1]  491     ld xl,a
      0001BD DE 01 70         [ 2]  492     ldw x,(bytecode,x) 
      0001C0 FC               [ 2]  493     jp (x)
                                    494 
                                    495 ; put mcu in lowest power mode 
                                    496 ; until reset 
      0001C1                        497 bye: ; { -- }
      0001C1 72 0D 52 40 FB   [ 2]  498     btjf UART3_SR,#UART_SR_TC,.
      0001C6 9B               [ 1]  499     sim 
      0001C7 8E               [10]  500     halt 
      0001C8 CC 03 6F         [ 2]  501     jp cold_start 
                                    502 
      0001CB                        503 key: ;{ -- c}
      0001CB CD 00 9B         [ 4]  504     call getchar 
      0001CE 5F               [ 1]  505     clrw x 
      0001CF 97               [ 1]  506     ld xl,a 
      0001D0 89               [ 2]  507     pushw x 
      0001D1 CC 01 B6         [ 2]  508     jp next 
                                    509 
      0001D4                        510 qkey: ; { -- 0| c 1 }
      0001D4 5F               [ 1]  511     clrw x 
      0001D5 89               [ 2]  512     pushw x 
      0001D6 72 0B 52 40 DB   [ 2]  513     btjf UART3_SR,#UART_SR_RXNE,next
      0001DB 0C 02            [ 1]  514     inc (2,sp) 
      0001DD C6 52 41         [ 1]  515     ld a,UART3_DR 
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (STMicroelectronics STM8), page 10.
Hexadecimal [24-Bits]



      0001E0 97               [ 1]  516     ld xl,a 
      0001E1 89               [ 2]  517     pushw x
      0001E2 CC 01 B6         [ 2]  518     jp next 
                                    519 
      0001E5                        520 emit: ; { c -- }
      0001E5 85               [ 2]  521     popw x 
      0001E6 9F               [ 1]  522     ld a,xl 
      0001E7 CD 00 87         [ 4]  523     call putchar
      0001EA CC 01 B6         [ 2]  524     jp next 
                                    525 
                                    526 ; vm subroutine call 
      0001ED                        527 subr: ; { -- }
      0001ED 90 F6            [ 1]  528     ld a,(y)
      0001EF 90 5C            [ 1]  529     incw y 
      0001F1 95               [ 1]  530     ld xh,a 
      0001F2 90 F6            [ 1]  531     ld a,(y)
      0001F4 90 5C            [ 1]  532     incw y 
      0001F6 97               [ 1]  533     ld xl,a 
      0001F7 90 89            [ 2]  534     pushw y ;save return address 
      0001F9 51               [ 1]  535     exgw x,y ; x become new vm_pc 
      0001FA CC 01 B6         [ 2]  536     jp next 
                                    537 
                                    538 
                                    539 ; return from vm subroutine
      0001FD                        540 exit: ; { addr -- }
      0001FD 90 85            [ 2]  541     popw y ; restore vm_pc
      0001FF CC 01 B6         [ 2]  542     jp next 
                                    543 
                                    544 ; execute routine from stack 
      000202                        545 exec: ; { addr_sub -- addr_ret }
      000202 85               [ 2]  546     popw x 
      000203 90 89            [ 2]  547     pushw y 
      000205 51               [ 1]  548     exgw x,y 
      000206 CC 01 B6         [ 2]  549     jp next 
                                    550 
                                    551 ; unconditional jump 
      000209                        552 branch: ; { -- }
      000209 90 F6            [ 1]  553     ld a,(y)
      00020B 90 5C            [ 1]  554     incw y 
      00020D 95               [ 1]  555     ld xh,a 
      00020E 90 F6            [ 1]  556     ld a,(y)
      000210 97               [ 1]  557     ld xl,a 
      000211 51               [ 1]  558     exgw x,y 
      000212 CC 01 B6         [ 2]  559     jp next 
                                    560 
                                    561 ; jump if TOS==0
      000215                        562 zbranch: ; { f -- }
      000215 85               [ 2]  563     popw x 
      000216 5D               [ 2]  564     tnzw x
      000217 27 F0            [ 1]  565     jreq branch
      000219 72 A9 00 02      [ 2]  566     addw y,#2 
      00021D CC 01 B6         [ 2]  567     jp next 
                                    568 
                                    569 
                                    570 ;-----------------------------
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (STMicroelectronics STM8), page 11.
Hexadecimal [24-Bits]



                                    571 ; send an ASCIZ string to UART3 
                                    572 ; input: 
                                    573 ;   TOS 		char * 
                                    574 ; output:
                                    575 ;   none 
                                    576 ;-------------------------------
      000220                        577 dotq: ; { .asciz -- }
      000220 85               [ 2]  578     popw x 
      000221 CD 00 90         [ 4]  579     call puts 
      000224 CC 01 B6         [ 2]  580 	jp next  
                                    581 
                                    582 
                                    583 ;---------------------------
                                    584 ; delete n character left of cursor 
                                    585 ; at terminal.
                                    586 ; input: 
                                    587 ;   TOS   	number of characters to delete.
                                    588 ; output:
                                    589 ;    none 
                                    590 ;--------------------------	
      000227                        591 delete: ; { n -- }
      000227 85               [ 2]  592     popw x 
      000228 5D               [ 2]  593 	tnzw x
      000229 27 06            [ 1]  594 	jreq 1$
      00022B CD 00 A4         [ 4]  595 0$:	call bksp 
      00022E 5A               [ 2]  596 	decw x
      00022F 26 FA            [ 1]  597 	jrne 0$
      000231 CC 01 B6         [ 2]  598 1$:	jp next 
                                    599 
                                    600 
                                    601 ;--------------------------
                                    602 ; print n spaces on terminal
                                    603 ; input:
                                    604 ;   TOS 	number of spaces 
                                    605 ; output:
                                    606 ;	none 
                                    607 ;---------------------------
      000234                        608 spaces: ; { n -- }
      000234 85               [ 2]  609     popw x 
      000235 A6 20            [ 1]  610 	ld a,#SPACE 
      000237 5D               [ 2]  611 	tnzw x
      000238 27 06            [ 1]  612 	jreq 9$
      00023A CD 00 87         [ 4]  613 1$:	call putchar  
      00023D 5A               [ 2]  614 	decw x
      00023E 26 FA            [ 1]  615 	jrne 1$
      000240                        616 9$: 
      000240 CC 01 B6         [ 2]  617 	jp next 
                                    618 
                                    619 ; print top of stack
                                    620 ; variables 'base' and 'tab_width'
                                    621 ; are used 
      000243                        622 prtos: ; { n -- }
      000243 85               [ 2]  623     popw x 
      000244 CD 01 0A         [ 4]  624     call print_int
      000247 CC 01 B6         [ 2]  625     jp next 
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (STMicroelectronics STM8), page 12.
Hexadecimal [24-Bits]



                                    626 
      00024A                        627 lit: ; { -- n }
      00024A 90 F6            [ 1]  628     ld a,(y)
      00024C 90 5C            [ 1]  629     incw y 
      00024E 95               [ 1]  630     ld xh,a 
      00024F 90 F6            [ 1]  631     ld a,(y)
      000251 90 5C            [ 1]  632     incw y 
      000253 97               [ 1]  633     ld xl,a 
      000254 89               [ 2]  634     pushw x  
      000255 CC 01 B6         [ 2]  635     jp next
                                    636 
      000258                        637 litc: ; { -- c }
      000258 90 F6            [ 1]  638     ld a,(y)
      00025A 90 5C            [ 1]  639     incw y 
      00025C 5F               [ 1]  640     clrw x 
      00025D 97               [ 1]  641     ld xl,a 
      00025E 89               [ 2]  642     pushw x 
      00025F CC 01 B6         [ 2]  643     jp next 
                                    644 
      000262                        645 fetch: ; { addr -- n}
      000262 1E 01            [ 2]  646     ldw x,(TOS,sp)
      000264 FE               [ 2]  647     ldw x,(x)
      000265 1F 01            [ 2]  648     ldw (TOS,sp),x 
      000267 CC 01 B6         [ 2]  649     jp next 
                                    650 
      00026A                        651 cfetch: ; { addr -- c }
      00026A 1E 01            [ 2]  652     ldw x,(TOS,sp)
      00026C F6               [ 1]  653     ld a,(x)
      00026D 5F               [ 1]  654     clrw x 
      00026E 97               [ 1]  655     ld xl,a 
      00026F 1F 01            [ 2]  656     ldw (TOS,sp),x 
      000271 CC 01 B6         [ 2]  657     jp  next 
                                    658 
      000274                        659 store: ; { addr n -- }
      000274 1E 03            [ 2]  660     ldw x,(N,sp)
      000276 CF 00 16         [ 2]  661     ldw ptr16,x 
      000279 85               [ 2]  662     popw x 
      00027A 72 CE 00 16      [ 5]  663     ldw x,[ptr16]
      00027E                        664     _drop CELLL 
      00027E 5B 02            [ 2]    1     addw sp,#CELLL 
      000280 CC 01 B6         [ 2]  665     jp next
                                    666 
      000283                        667 cstore: ; { addr c -- }
      000283 1E 03            [ 2]  668     ldw x,(N,sp)
      000285 CF 00 16         [ 2]  669     ldw ptr16,x 
      000288 85               [ 2]  670     popw x 
      000289 9F               [ 1]  671     ld a,xl 
      00028A 72 C7 00 16      [ 4]  672     ld [ptr16],a 
      00028E                        673     _drop CELLL 
      00028E 5B 02            [ 2]    1     addw sp,#CELLL 
      000290 CC 01 B6         [ 2]  674     jp next
                                    675 
      000293                        676 rot: ;{ n1 n2 n3 -- n3 n1 n2 }
      000293 1E 01            [ 2]  677     ldw x,(TOS,sp)
      000295 CF 00 0B         [ 2]  678     ldw acc16,x 
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (STMicroelectronics STM8), page 13.
Hexadecimal [24-Bits]



      000298 1E 03            [ 2]  679     ldw x,(N,sp)
      00029A 1F 01            [ 2]  680     ldw (TOS,sp),x
      00029C 1E 05            [ 2]  681     ldw x,(5,sp)
      00029E 1F 03            [ 2]  682     ldw (N,sp),x 
      0002A0 CE 00 0B         [ 2]  683     ldw x,acc16 
      0002A3 1F 05            [ 2]  684     ldw (5,sp),x
      0002A5 CC 01 B6         [ 2]  685     jp next 
                                    686 
      0002A8                        687 nrot: ; {n1 n2 n3 -- n2 n3 n1 }
      0002A8 1E 05            [ 2]  688     ldw x,(5,sp)
      0002AA CF 00 0B         [ 2]  689     ldw acc16,x 
      0002AD 1E 03            [ 2]  690     ldw x,(N,sp)
      0002AF 1F 05            [ 2]  691     ldw (5,sp),x
      0002B1 1E 01            [ 2]  692     ldw x,(TOS,sp)
      0002B3 1F 03            [ 2]  693     ldw (N,sp),x
      0002B5 CE 00 0B         [ 2]  694     ldw x,acc16 
      0002B8 1F 03            [ 2]  695     ldw (N,sp),x  
      0002BA CC 01 B6         [ 2]  696     jp next 
                                    697 
      0002BD                        698 drop: 
      0002BD                        699     _drop CELLL
      0002BD 5B 02            [ 2]    1     addw sp,#CELLL 
      0002BF CC 01 B6         [ 2]  700     jp next 
                                    701     
      0002C2                        702 dup: ; { n -- n n }
      0002C2 1E 01            [ 2]  703     ldw x,(TOS,sp)
      0002C4 89               [ 2]  704     pushw x 
      0002C5 CC 01 B6         [ 2]  705     jp next 
                                    706 
      0002C8                        707 swap: ; { n1 n2 -- n2 n1 }
      0002C8 1E 01            [ 2]  708     ldw x,(TOS,sp)
      0002CA CF 00 0B         [ 2]  709     ldw acc16,x 
      0002CD 1E 03            [ 2]  710     ldw x,(N,sp)
      0002CF 1F 01            [ 2]  711     ldw (TOS,sp),x
      0002D1 CE 00 0B         [ 2]  712     ldw x,acc16 
      0002D4 1F 03            [ 2]  713     ldw (N,sp),x 
      0002D6 CC 01 B6         [ 2]  714     jp next 
                                    715 
      0002D9                        716 plus: ; { n1 n2 -- n1+n2 }
      0002D9 85               [ 2]  717     popw x
      0002DA 72 FB 01         [ 2]  718     addw x,(TOS,sp)
      0002DD 1F 01            [ 2]  719     ldw (TOS,sp),x 
      0002DF CC 01 B6         [ 2]  720     jp next
                                    721 
      0002E2                        722 minus: ; {n1 n2 -- n1-n2 }
      0002E2 1E 03            [ 2]  723     ldw x,(N,sp) 
      0002E4 72 F0 01         [ 2]  724     subw x,(TOS,sp) 
      0002E7 1F 03            [ 2]  725     ldw (N,sp),x 
      0002E9                        726     _drop CELLL
      0002E9 5B 02            [ 2]    1     addw sp,#CELLL 
      0002EB CC 01 B6         [ 2]  727     jp next
                                    728 
      0002EE                        729 slash: ; {n1 n2 -- n1/n2}
      0002EE 1E 01            [ 2]  730     ldw x,(TOS,sp) ; n2 
      0002F0 17 01            [ 2]  731     ldw (TOS,sp),y 
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (STMicroelectronics STM8), page 14.
Hexadecimal [24-Bits]



      0002F2 51               [ 1]  732     exgw x,y 
      0002F3 1E 03            [ 2]  733     ldw x,(N,sp) ; n1 
      0002F5 65               [ 2]  734     divw x,y 
      0002F6 1F 03            [ 2]  735     ldw (N,sp),x ; quotient
      0002F8 90 85            [ 2]  736     popw y 
      0002FA CC 01 B6         [ 2]  737     jp next 
                                    738 
      0002FD                        739 mod: ; { n1 n2 -- n1%n2}
      0002FD 1E 01            [ 2]  740     ldw x,(TOS,sp) ; n2 
      0002FF 17 01            [ 2]  741     ldw (TOS,sp),y 
      000301 51               [ 1]  742     exgw x,y 
      000302 1E 03            [ 2]  743     ldw x,(N,sp) ; n1 
      000304 65               [ 2]  744     divw x,y 
      000305 17 03            [ 2]  745     ldw (N,sp),y ; reste
      000307 90 85            [ 2]  746     popw y 
      000309 CC 01 B6         [ 2]  747     jp next 
                                    748 
                                    749 ; unsigned multiply 
                                    750 ; overflow is discarded 
      00030C                        751 staru: ; {u1 u2 -- u1*u2 }
      00030C CD 00 B4         [ 4]  752     call mul16u 
      00030F                        753     _drop CELLL ; discard overflow 
      00030F 5B 02            [ 2]    1     addw sp,#CELLL 
      000311 CC 01 B6         [ 2]  754     jp next 
                                    755 
      000314                        756 over: ; { n1 n2 -- n1 n2 n1 }
      000314 1E 03            [ 2]  757     ldw x,(N,sp)
      000316 89               [ 2]  758     pushw x 
      000317 CC 01 B6         [ 2]  759     jp next 
                                    760     
      00031A                        761 neg: ;{ n -- -n}
      00031A 1E 01            [ 2]  762     ldw x,(TOS,sp)
      00031C 50               [ 2]  763     negw x 
      00031D 1F 01            [ 2]  764     ldw (TOS,sp),x
      00031F CC 01 B6         [ 2]  765     jp next 
                                    766 
                                    767 ; n<0? 
      000322                        768 zlt: ; {n -- 0|1 }
      000322 5F               [ 1]  769     clrw x 
      000323 7B 01            [ 1]  770     ld a,(TOS,sp)
      000325 A5 80            [ 1]  771     bcp a,#0x80
      000327 27 01            [ 1]  772     jreq  1$
      000329 5C               [ 1]  773     incw x 
      00032A 1F 01            [ 2]  774 1$: ldw (TOS,sp),x 
      00032C CC 01 B6         [ 2]  775     jp next 
                                    776 
                                    777  
      00032F                        778 star: ; { n1 n2 -- n1*n2 }
      00032F 1E 01            [ 2]  779     ldw x,(TOS,sp)
      000331 CF 00 0B         [ 2]  780     ldw acc16,x
      000334 1E 03            [ 2]  781     ldw x,(N,sp)
      000336 CF 00 16         [ 2]  782     ldw ptr16,x 
      000339 5F               [ 1]  783     clrw x
      00033A 1F 03            [ 2]  784     ldw (N,sp),x 
      00033C CE 00 16         [ 2]  785     ldw x,ptr16
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (STMicroelectronics STM8), page 15.
Hexadecimal [24-Bits]



      00033F 2A 03            [ 1]  786     jrpl 1$
      000341 03 03            [ 1]  787     cpl (N,sp)
      000343 50               [ 2]  788     negw x 
      000344 1F 01            [ 2]  789 1$: ldw (TOS,sp),x
      000346 CE 00 0B         [ 2]  790     ldw x,acc16 
      000349 2A 03            [ 1]  791     jrpl 2$
      00034B 03 03            [ 1]  792     cpl (N,sp)
      00034D 50               [ 2]  793     negw x 
      00034E 89               [ 2]  794 2$: pushw x 
      00034F CD 00 B4         [ 4]  795     call mul16u 
      000352                        796     _drop CELLL ; discard overflow
      000352 5B 02            [ 2]    1     addw sp,#CELLL 
      000354 85               [ 2]  797     popw x 
      000355 7B 01            [ 1]  798     ld a,(TOS,sp)
      000357 A5 80            [ 1]  799     bcp a,#0x80 
      000359 27 01            [ 1]  800     jreq 4$
      00035B 50               [ 2]  801     negw x 
      00035C 1F 01            [ 2]  802 4$: ldw (TOS,sp),x 
      00035E CC 01 B6         [ 2]  803     jp next     
                                    804 
      000361                        805 decim:
      000361 35 0A 00 07      [ 1]  806     mov base,#10
      000365 CC 01 B6         [ 2]  807     jp next 
                                    808 
      000368                        809 hexa:
      000368 35 10 00 07      [ 1]  810     mov base,#16
      00036C CC 01 B6         [ 2]  811     jP next 
                                    812 
                                    813 ;-----------------------------
                                    814 ;  STARTUP CODE
                                    815 ;-----------------------------
                                    816 
      00036F                        817 cold_start:
      00036F AE 17 FF         [ 2]  818     ldw x,#STACK_EMPTY
      000372 94               [ 1]  819     ldw sp,x
                                    820 ; clear all ram 
      000373 7F               [ 1]  821 0$: clr (x)
      000374 5A               [ 2]  822 	decw x 
      000375 26 FC            [ 1]  823 	jrne 0$
                                    824 ; activate pull up on all inputs 
      000377 A6 FF            [ 1]  825 	ld a,#255 
      000379 C7 50 03         [ 1]  826 	ld PA_CR1,a 
      00037C C7 50 08         [ 1]  827 	ld PB_CR1,a 
      00037F C7 50 0D         [ 1]  828 	ld PC_CR1,a 
      000382 C7 50 12         [ 1]  829 	ld PD_CR1,a 
      000385 C7 50 17         [ 1]  830 	ld PE_CR1,a 
      000388 C7 50 1C         [ 1]  831 	ld PF_CR1,a 
      00038B C7 50 21         [ 1]  832 	ld PG_CR1,a 
      00038E C7 50 2B         [ 1]  833 	ld PI_CR1,a 
                                    834 ; configure LD2 pin 
      000391 72 1A 50 0D      [ 1]  835     bset PC_CR1,#LED2_BIT
      000395 72 1A 50 0E      [ 1]  836     bset PC_CR2,#LED2_BIT
      000399 72 1A 50 0C      [ 1]  837     bset PC_DDR,#LED2_BIT
      00039D 72 1A 50 0A      [ 1]  838     bset PC_ODR,#LED2_BIT 
                                    839 ; select internal clock no divisor: 16 Mhz 	
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (STMicroelectronics STM8), page 16.
Hexadecimal [24-Bits]



      0003A1 A6 E1            [ 1]  840 	ld a,#CLK_SWR_HSI 
      0003A3 5F               [ 1]  841 	clrw x  
      0003A4 CD 00 29         [ 4]  842     call clock_init 
                                    843 ;    call timer4_init 
                                    844 ; UART3 at 115200 BAUD
      0003A7 CD 00 50         [ 4]  845     call uart3_init
      0003AA 9A               [ 1]  846     rim 
      0003AB 35 0A 00 07      [ 1]  847     mov base,#10
      0003AF 35 04 00 27      [ 1]  848     mov tab_width,#4 
      0003B3 72 1B 50 0A      [ 1]  849     bres PC_ODR,#LED2_BIT 
      0003B7 90 AE 03 CD      [ 2]  850     ldw y,#test 
      0003BB CC 01 B6         [ 2]  851     jp next 
      0003BE                        852 warm: 
      0003BE 63 65 63 69 20 65 73   853 .asciz "ceci est test\n"
             74 20 74 65 73 74 0A
             00
      0003CD                        854 test:
      0003CD 0E 4F 06 0E 4B 06 0E   855     .byte LITC,'O',EMIT,LITC,'K',EMIT,LITC,CR,EMIT
             0D 06
      0003D6 0D 03 CD 0D 03 BE 1C   856     .byte LIT,test>>8,test,LIT,warm>>8,warm,MINUS,PRTOS,BYE
             0C 00
                                    857 
                                    858     
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (STMicroelectronics STM8), page 17.
Hexadecimal [24-Bits]

Symbol Table

    .__.$$$.=  002710 L   |     .__.ABS.=  000000 G   |     .__.CPU.=  000000 L
    .__.H$L.=  000001 L   |     ADC_CR1 =  005401     |     ADC_CR1_=  000000 
    ADC_CR1_=  000001     |     ADC_CR1_=  000004     |     ADC_CR1_=  000005 
    ADC_CR1_=  000006     |     ADC_CR2 =  005402     |     ADC_CR2_=  000003 
    ADC_CR2_=  000004     |     ADC_CR2_=  000005     |     ADC_CR2_=  000006 
    ADC_CR2_=  000001     |     ADC_CR3 =  005403     |     ADC_CR3_=  000007 
    ADC_CR3_=  000006     |     ADC_CSR =  005400     |     ADC_CSR_=  000006 
    ADC_CSR_=  000004     |     ADC_CSR_=  000000     |     ADC_CSR_=  000001 
    ADC_CSR_=  000002     |     ADC_CSR_=  000003     |     ADC_CSR_=  000007 
    ADC_CSR_=  000005     |     ADC_DRH =  005404     |     ADC_DRL =  005405 
    ADC_TDRH=  005406     |     ADC_TDRL=  005407     |     AFR     =  004803 
    AFR0_ADC=  000000     |     AFR1_TIM=  000001     |     AFR2_CCO=  000002 
    AFR3_TIM=  000003     |     AFR4_TIM=  000004     |     AFR5_TIM=  000005 
    AFR6_I2C=  000006     |     AFR7_BEE=  000007     |     ARG_OFS =  000002 
    AWU_APR =  0050F1     |     AWU_CSR =  0050F0     |     AWU_TBR =  0050F2 
    B0_MASK =  000001     |     B115200 =  000006     |     B19200  =  000003 
    B1_MASK =  000002     |     B230400 =  000007     |     B2400   =  000000 
    B2_MASK =  000004     |     B38400  =  000004     |     B3_MASK =  000008 
    B460800 =  000008     |     B4800   =  000001     |     B4_MASK =  000010 
    B57600  =  000005     |     B5_MASK =  000020     |     B6_MASK =  000040 
    B7_MASK =  000080     |     B921600 =  000009     |     B9600   =  000002 
    BEEP_BIT=  000004     |     BEEP_CSR=  0050F3     |     BEEP_MAS=  000010 
    BEEP_POR=  00000F     |     BELL    =  000007     |     BIT0    =  000000 
    BIT1    =  000001     |     BIT2    =  000002     |     BIT3    =  000003 
    BIT4    =  000004     |     BIT5    =  000005     |     BIT6    =  000006 
    BIT7    =  000007     |     BLOCK_SI=  000080     |     BOOT_ROM=  006000 
    BOOT_ROM=  007FFF     |     BRANCH  =  000004     |     BSP     =  000008 
    BYE     =  000000     |     CAN_DGR =  005426     |     CAN_FPSR=  005427 
    CAN_IER =  005425     |     CAN_MCR =  005420     |     CAN_MSR =  005421 
    CAN_P0  =  005428     |     CAN_P1  =  005429     |     CAN_P2  =  00542A 
    CAN_P3  =  00542B     |     CAN_P4  =  00542C     |     CAN_P5  =  00542D 
    CAN_P6  =  00542E     |     CAN_P7  =  00542F     |     CAN_P8  =  005430 
    CAN_P9  =  005431     |     CAN_PA  =  005432     |     CAN_PB  =  005433 
    CAN_PC  =  005434     |     CAN_PD  =  005435     |     CAN_PE  =  005436 
    CAN_PF  =  005437     |     CAN_RFR =  005424     |     CAN_TPR =  005423 
    CAN_TSR =  005422     |     CC_C    =  000000     |     CC_H    =  000004 
    CC_I0   =  000003     |     CC_I1   =  000005     |     CC_N    =  000002 
    CC_V    =  000007     |     CC_Z    =  000001     |     CELLL   =  000002 
    CFETCH  =  000010     |     CFG_GCR =  007F60     |     CFG_GCR_=  000001 
    CFG_GCR_=  000000     |     CLKOPT  =  004807     |     CLKOPT_C=  000002 
    CLKOPT_E=  000003     |     CLKOPT_P=  000000     |     CLKOPT_P=  000001 
    CLK_CCOR=  0050C9     |     CLK_CKDI=  0050C6     |     CLK_CKDI=  000000 
    CLK_CKDI=  000001     |     CLK_CKDI=  000002     |     CLK_CKDI=  000003 
    CLK_CKDI=  000004     |     CLK_CMSR=  0050C3     |     CLK_CSSR=  0050C8 
    CLK_ECKR=  0050C1     |     CLK_ECKR=  000000     |     CLK_ECKR=  000001 
    CLK_HSIT=  0050CC     |     CLK_ICKR=  0050C0     |     CLK_ICKR=  000002 
    CLK_ICKR=  000000     |     CLK_ICKR=  000001     |     CLK_ICKR=  000003 
    CLK_ICKR=  000004     |     CLK_ICKR=  000005     |     CLK_PCKE=  0050C7 
    CLK_PCKE=  000000     |     CLK_PCKE=  000001     |     CLK_PCKE=  000007 
    CLK_PCKE=  000005     |     CLK_PCKE=  000006     |     CLK_PCKE=  000004 
    CLK_PCKE=  000002     |     CLK_PCKE=  000003     |     CLK_PCKE=  0050CA 
    CLK_PCKE=  000003     |     CLK_PCKE=  000002     |     CLK_PCKE=  000007 
    CLK_SWCR=  0050C5     |     CLK_SWCR=  000000     |     CLK_SWCR=  000001 
    CLK_SWCR=  000002     |     CLK_SWCR=  000003     |     CLK_SWIM=  0050CD 
    CLK_SWR =  0050C4     |     CLK_SWR_=  0000B4     |     CLK_SWR_=  0000E1 
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (STMicroelectronics STM8), page 18.
Hexadecimal [24-Bits]

Symbol Table

    CLK_SWR_=  0000D2     |     COMMA   =  00002C     |     CPU_A   =  007F00 
    CPU_CCR =  007F0A     |     CPU_PCE =  007F01     |     CPU_PCH =  007F02 
    CPU_PCL =  007F03     |     CPU_SPH =  007F08     |     CPU_SPL =  007F09 
    CPU_XH  =  007F04     |     CPU_XL  =  007F05     |     CPU_YH  =  007F06 
    CPU_YL  =  007F07     |     CR      =  00000D     |     CSTORE  =  000012 
    CTRL_A  =  000001     |     CTRL_B  =  000002     |     CTRL_C  =  000003 
    CTRL_D  =  000004     |     CTRL_E  =  000005     |     CTRL_F  =  000006 
    CTRL_G  =  000007     |     CTRL_H  =  000008     |     CTRL_I  =  000009 
    CTRL_J  =  00000A     |     CTRL_K  =  00000B     |     CTRL_L  =  00000C 
    CTRL_M  =  00000D     |     CTRL_N  =  00000E     |     CTRL_O  =  00000F 
    CTRL_P  =  000010     |     CTRL_Q  =  000011     |     CTRL_R  =  000012 
    CTRL_S  =  000013     |     CTRL_T  =  000014     |     CTRL_U  =  000015 
    CTRL_V  =  000016     |     CTRL_W  =  000017     |     CTRL_X  =  000018 
    CTRL_Y  =  000019     |     CTRL_Z  =  00001A     |     DEBUG   =  000000 
    DEBUG_BA=  007F00     |     DEBUG_EN=  007FFF     |     DECIM   =  000021 
    DELETE  =  00000A     |     DEVID_BA=  0048CD     |     DEVID_EN=  0048D8 
    DEVID_LO=  0048D2     |     DEVID_LO=  0048D3     |     DEVID_LO=  0048D4 
    DEVID_LO=  0048D5     |     DEVID_LO=  0048D6     |     DEVID_LO=  0048D7 
    DEVID_LO=  0048D8     |     DEVID_WA=  0048D1     |     DEVID_XH=  0048CE 
    DEVID_XL=  0048CD     |     DEVID_YH=  0048D0     |     DEVID_YL=  0048CF 
    DM_BK1RE=  007F90     |     DM_BK1RH=  007F91     |     DM_BK1RL=  007F92 
    DM_BK2RE=  007F93     |     DM_BK2RH=  007F94     |     DM_BK2RL=  007F95 
    DM_CR1  =  007F96     |     DM_CR2  =  007F97     |     DM_CSR1 =  007F98 
    DM_CSR2 =  007F99     |     DM_ENFCT=  007F9A     |     DOTQ    =  000009 
    DROP    =  000015     |     DUP     =  000016     |     EEPROM_B=  004000 
    EEPROM_E=  0047FF     |     EEPROM_S=  000800     |     EMIT    =  000006 
    ESC     =  00001B     |     EXEC    =  000003     |     EXIT    =  000002 
    EXTI_CR1=  0050A0     |     EXTI_CR2=  0050A1     |     FBREAK  =  000004 
    FCOMP   =  000005     |     FETCH   =  00000F     |     FF      =  00000C 
    FFOR    =  000002     |     FHSE    =  7A1200     |     FHSI    =  F42400 
    FLASH_BA=  008000     |     FLASH_CR=  00505A     |     FLASH_CR=  000002 
    FLASH_CR=  000000     |     FLASH_CR=  000003     |     FLASH_CR=  000001 
    FLASH_CR=  00505B     |     FLASH_CR=  000005     |     FLASH_CR=  000004 
    FLASH_CR=  000007     |     FLASH_CR=  000000     |     FLASH_CR=  000006 
    FLASH_DU=  005064     |     FLASH_DU=  0000AE     |     FLASH_DU=  000056 
    FLASH_EN=  027FFF     |     FLASH_FP=  00505D     |     FLASH_FP=  000000 
    FLASH_FP=  000001     |     FLASH_FP=  000002     |     FLASH_FP=  000003 
    FLASH_FP=  000004     |     FLASH_FP=  000005     |     FLASH_IA=  00505F 
    FLASH_IA=  000003     |     FLASH_IA=  000002     |     FLASH_IA=  000006 
    FLASH_IA=  000001     |     FLASH_IA=  000000     |     FLASH_NC=  00505C 
    FLASH_NF=  00505E     |     FLASH_NF=  000000     |     FLASH_NF=  000001 
    FLASH_NF=  000002     |     FLASH_NF=  000003     |     FLASH_NF=  000004 
    FLASH_NF=  000005     |     FLASH_PU=  005062     |     FLASH_PU=  000056 
    FLASH_PU=  0000AE     |     FLASH_SI=  020000     |     FLASH_WS=  00480D 
    FLSI    =  01F400     |     FRUN    =  000000     |     FSLEEP  =  000003 
    FTRAP   =  000001     |     GPIO_BAS=  005000     |     GPIO_CR1=  000003 
    GPIO_CR2=  000004     |     GPIO_DDR=  000002     |     GPIO_IDR=  000001 
    GPIO_ODR=  000000     |     GPIO_SIZ=  000005     |     HEXA    =  000022 
    HSECNT  =  004809     |     I2C_CCRH=  00521C     |     I2C_CCRH=  000080 
    I2C_CCRH=  0000C0     |     I2C_CCRH=  000080     |     I2C_CCRH=  000000 
    I2C_CCRH=  000001     |     I2C_CCRH=  000000     |     I2C_CCRL=  00521B 
    I2C_CCRL=  00001A     |     I2C_CCRL=  000002     |     I2C_CCRL=  00000D 
    I2C_CCRL=  000050     |     I2C_CCRL=  000090     |     I2C_CCRL=  0000A0 
    I2C_CR1 =  005210     |     I2C_CR1_=  000006     |     I2C_CR1_=  000007 
    I2C_CR1_=  000000     |     I2C_CR2 =  005211     |     I2C_CR2_=  000002 
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (STMicroelectronics STM8), page 19.
Hexadecimal [24-Bits]

Symbol Table

    I2C_CR2_=  000003     |     I2C_CR2_=  000000     |     I2C_CR2_=  000001 
    I2C_CR2_=  000007     |     I2C_DR  =  005216     |     I2C_FREQ=  005212 
    I2C_ITR =  00521A     |     I2C_ITR_=  000002     |     I2C_ITR_=  000000 
    I2C_ITR_=  000001     |     I2C_OARH=  005214     |     I2C_OARH=  000001 
    I2C_OARH=  000002     |     I2C_OARH=  000006     |     I2C_OARH=  000007 
    I2C_OARL=  005213     |     I2C_OARL=  000000     |     I2C_OAR_=  000813 
    I2C_OAR_=  000009     |     I2C_PECR=  00521E     |     I2C_READ=  000001 
    I2C_SR1 =  005217     |     I2C_SR1_=  000003     |     I2C_SR1_=  000001 
    I2C_SR1_=  000002     |     I2C_SR1_=  000006     |     I2C_SR1_=  000000 
    I2C_SR1_=  000004     |     I2C_SR1_=  000007     |     I2C_SR2 =  005218 
    I2C_SR2_=  000002     |     I2C_SR2_=  000001     |     I2C_SR2_=  000000 
    I2C_SR2_=  000003     |     I2C_SR2_=  000005     |     I2C_SR3 =  005219 
    I2C_SR3_=  000001     |     I2C_SR3_=  000007     |     I2C_SR3_=  000004 
    I2C_SR3_=  000000     |     I2C_SR3_=  000002     |     I2C_TRIS=  00521D 
    I2C_TRIS=  000005     |     I2C_TRIS=  000005     |     I2C_TRIS=  000005 
    I2C_TRIS=  000011     |     I2C_TRIS=  000011     |     I2C_TRIS=  000011 
    I2C_WRIT=  000000     |     INPUT_DI=  000000     |     INPUT_EI=  000001 
    INPUT_FL=  000000     |     INPUT_PU=  000001     |     INT_ADC2=  000016 
    INT_AUAR=  000012     |     INT_AWU =  000001     |     INT_CAN_=  000008 
    INT_CAN_=  000009     |     INT_CLK =  000002     |     INT_EXTI=  000003 
    INT_EXTI=  000004     |     INT_EXTI=  000005     |     INT_EXTI=  000006 
    INT_EXTI=  000007     |     INT_FLAS=  000018     |     INT_I2C =  000013 
    INT_SPI =  00000A     |     INT_TIM1=  00000C     |     INT_TIM1=  00000B 
    INT_TIM2=  00000E     |     INT_TIM2=  00000D     |     INT_TIM3=  000010 
    INT_TIM3=  00000F     |     INT_TIM4=  000017     |     INT_TLI =  000000 
    INT_UART=  000011     |     INT_UART=  000015     |     INT_UART=  000014 
    INT_VECT=  008060     |     INT_VECT=  00800C     |     INT_VECT=  008028 
    INT_VECT=  00802C     |     INT_VECT=  008010     |     INT_VECT=  008014 
    INT_VECT=  008018     |     INT_VECT=  00801C     |     INT_VECT=  008020 
    INT_VECT=  008024     |     INT_VECT=  008068     |     INT_VECT=  008054 
    INT_VECT=  008000     |     INT_VECT=  008030     |     INT_VECT=  008038 
    INT_VECT=  008034     |     INT_VECT=  008040     |     INT_VECT=  00803C 
    INT_VECT=  008048     |     INT_VECT=  008044     |     INT_VECT=  008064 
    INT_VECT=  008008     |     INT_VECT=  008004     |     INT_VECT=  008050 
    INT_VECT=  00804C     |     INT_VECT=  00805C     |     INT_VECT=  008058 
    ITC_SPR1=  007F70     |     ITC_SPR2=  007F71     |     ITC_SPR3=  007F72 
    ITC_SPR4=  007F73     |     ITC_SPR5=  007F74     |     ITC_SPR6=  007F75 
    ITC_SPR7=  007F76     |     ITC_SPR8=  007F77     |     IWDG_KR =  0050E0 
    IWDG_PR =  0050E1     |     IWDG_RLR=  0050E2     |     KEY     =  000007 
    LED2_BIT=  000005     |     LED2_MAS=  000020     |     LED2_POR=  00500A 
    LIT     =  00000D     |     LITC    =  00000E     |     MINUS   =  00001C 
    MOD     =  00001E     |     N       =  000003     |     NAFR    =  004804 
    NCLKOPT =  004808     |     NEG     =  000019     |     NFLASH_W=  00480E 
    NHSECNT =  00480A     |     NL      =  00000A     |     NOPT1   =  004802 
    NOPT2   =  004804     |     NOPT3   =  004806     |     NOPT4   =  004808 
    NOPT5   =  00480A     |     NOPT6   =  00480C     |     NOPT7   =  00480E 
    NOPTBL  =  00487F     |     NROT    =  000014     |     NUBC    =  004802 
    NWDGOPT =  004806     |     NWDGOPT_=  FFFFFFFD     |     NWDGOPT_=  FFFFFFFC 
    NWDGOPT_=  FFFFFFFF     |     NWDGOPT_=  FFFFFFFE     |   5 NonHandl   000000 R
    OPT0    =  004800     |     OPT1    =  004801     |     OPT2    =  004803 
    OPT3    =  004805     |     OPT4    =  004807     |     OPT5    =  004809 
    OPT6    =  00480B     |     OPT7    =  00480D     |     OPTBL   =  00487E 
    OPTION_B=  004800     |     OPTION_E=  00487F     |     OPTION_S=  000080 
    OUTPUT_F=  000001     |     OUTPUT_O=  000000     |     OUTPUT_P=  000001 
    OUTPUT_S=  000000     |     OVER    =  000018     |     PA      =  000000 
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (STMicroelectronics STM8), page 20.
Hexadecimal [24-Bits]

Symbol Table

    PAD_SIZE=  000028     |     PA_BASE =  005000     |     PA_CR1  =  005003 
    PA_CR2  =  005004     |     PA_DDR  =  005002     |     PA_IDR  =  005001 
    PA_ODR  =  005000     |     PB      =  000005     |     PB_BASE =  005005 
    PB_CR1  =  005008     |     PB_CR2  =  005009     |     PB_DDR  =  005007 
    PB_IDR  =  005006     |     PB_ODR  =  005005     |     PC      =  00000A 
    PC_BASE =  00500A     |     PC_CR1  =  00500D     |     PC_CR2  =  00500E 
    PC_DDR  =  00500C     |     PC_IDR  =  00500B     |     PC_ODR  =  00500A 
    PD      =  00000F     |     PD_BASE =  00500F     |     PD_CR1  =  005012 
    PD_CR2  =  005013     |     PD_DDR  =  005011     |     PD_IDR  =  005010 
    PD_ODR  =  00500F     |     PE      =  000014     |     PE_BASE =  005014 
    PE_CR1  =  005017     |     PE_CR2  =  005018     |     PE_DDR  =  005016 
    PE_IDR  =  005015     |     PE_ODR  =  005014     |     PF      =  000019 
    PF_BASE =  005019     |     PF_CR1  =  00501C     |     PF_CR2  =  00501D 
    PF_DDR  =  00501B     |     PF_IDR  =  00501A     |     PF_ODR  =  005019 
    PG      =  00001E     |     PG_BASE =  00501E     |     PG_CR1  =  005021 
    PG_CR2  =  005022     |     PG_DDR  =  005020     |     PG_IDR  =  00501F 
    PG_ODR  =  00501E     |     PH      =  000023     |     PH_BASE =  005023 
    PH_CR1  =  005026     |     PH_CR2  =  005027     |     PH_DDR  =  005025 
    PH_IDR  =  005024     |     PH_ODR  =  005023     |     PI      =  000028 
    PI_BASE =  005028     |     PI_CR1  =  00502B     |     PI_CR2  =  00502C 
    PI_DDR  =  00502A     |     PI_IDR  =  005029     |     PI_ODR  =  005028 
    PLUS    =  00001B     |     PRTOS   =  00000C     |     QKEY    =  000008 
    RAM_BASE=  000000     |     RAM_END =  0017FF     |     RAM_SIZE=  001800 
    ROP     =  004800     |     ROT     =  000013     |     RST_SR  =  0050B3 
    SFR_BASE=  005000     |     SFR_END =  0057FF     |     SHARP   =  000023 
    SIGN    =  000001     |     SLASH   =  00001D     |     SPACE   =  000020 
    SPACES  =  00000B     |     SPI_CR1 =  005200     |     SPI_CR2 =  005201 
    SPI_CRCP=  005205     |     SPI_DR  =  005204     |     SPI_ICR =  005202 
    SPI_RXCR=  005206     |     SPI_SR  =  005203     |     SPI_TXCR=  005207 
    STACK_EM=  0017FF     |     STACK_SI=  0000C0     |     STAR    =  000020 
    STARU   =  00001F     |     STORE   =  000011     |     SUBR    =  000001 
    SWAP    =  000017     |     SWIM_CSR=  007F80     |     TAB     =  000009 
    TIB_SIZE=  000050     |     TICK    =  000027     |     TIM1_ARR=  005262 
    TIM1_ARR=  005263     |     TIM1_BKR=  00526D     |     TIM1_CCE=  00525C 
    TIM1_CCE=  00525D     |     TIM1_CCM=  005258     |     TIM1_CCM=  000000 
    TIM1_CCM=  000001     |     TIM1_CCM=  000004     |     TIM1_CCM=  000005 
    TIM1_CCM=  000006     |     TIM1_CCM=  000007     |     TIM1_CCM=  000002 
    TIM1_CCM=  000003     |     TIM1_CCM=  000007     |     TIM1_CCM=  000002 
    TIM1_CCM=  000004     |     TIM1_CCM=  000005     |     TIM1_CCM=  000006 
    TIM1_CCM=  000003     |     TIM1_CCM=  005259     |     TIM1_CCM=  000000 
    TIM1_CCM=  000001     |     TIM1_CCM=  000004     |     TIM1_CCM=  000005 
    TIM1_CCM=  000006     |     TIM1_CCM=  000007     |     TIM1_CCM=  000002 
    TIM1_CCM=  000003     |     TIM1_CCM=  000007     |     TIM1_CCM=  000002 
    TIM1_CCM=  000004     |     TIM1_CCM=  000005     |     TIM1_CCM=  000006 
    TIM1_CCM=  000003     |     TIM1_CCM=  00525A     |     TIM1_CCM=  000000 
    TIM1_CCM=  000001     |     TIM1_CCM=  000004     |     TIM1_CCM=  000005 
    TIM1_CCM=  000006     |     TIM1_CCM=  000007     |     TIM1_CCM=  000002 
    TIM1_CCM=  000003     |     TIM1_CCM=  000007     |     TIM1_CCM=  000002 
    TIM1_CCM=  000004     |     TIM1_CCM=  000005     |     TIM1_CCM=  000006 
    TIM1_CCM=  000003     |     TIM1_CCM=  00525B     |     TIM1_CCM=  000000 
    TIM1_CCM=  000001     |     TIM1_CCM=  000004     |     TIM1_CCM=  000005 
    TIM1_CCM=  000006     |     TIM1_CCM=  000007     |     TIM1_CCM=  000002 
    TIM1_CCM=  000003     |     TIM1_CCM=  000007     |     TIM1_CCM=  000002 
    TIM1_CCM=  000004     |     TIM1_CCM=  000005     |     TIM1_CCM=  000006 
    TIM1_CCM=  000003     |     TIM1_CCR=  005265     |     TIM1_CCR=  005266 
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (STMicroelectronics STM8), page 21.
Hexadecimal [24-Bits]

Symbol Table

    TIM1_CCR=  005267     |     TIM1_CCR=  005268     |     TIM1_CCR=  005269 
    TIM1_CCR=  00526A     |     TIM1_CCR=  00526B     |     TIM1_CCR=  00526C 
    TIM1_CNT=  00525E     |     TIM1_CNT=  00525F     |     TIM1_CR1=  005250 
    TIM1_CR2=  005251     |     TIM1_CR2=  000000     |     TIM1_CR2=  000002 
    TIM1_CR2=  000004     |     TIM1_CR2=  000005     |     TIM1_CR2=  000006 
    TIM1_DTR=  00526E     |     TIM1_EGR=  005257     |     TIM1_EGR=  000007 
    TIM1_EGR=  000001     |     TIM1_EGR=  000002     |     TIM1_EGR=  000003 
    TIM1_EGR=  000004     |     TIM1_EGR=  000005     |     TIM1_EGR=  000006 
    TIM1_EGR=  000000     |     TIM1_ETR=  005253     |     TIM1_ETR=  000006 
    TIM1_ETR=  000000     |     TIM1_ETR=  000001     |     TIM1_ETR=  000002 
    TIM1_ETR=  000003     |     TIM1_ETR=  000007     |     TIM1_ETR=  000004 
    TIM1_ETR=  000005     |     TIM1_IER=  005254     |     TIM1_IER=  000007 
    TIM1_IER=  000001     |     TIM1_IER=  000002     |     TIM1_IER=  000003 
    TIM1_IER=  000004     |     TIM1_IER=  000005     |     TIM1_IER=  000006 
    TIM1_IER=  000000     |     TIM1_OIS=  00526F     |     TIM1_PSC=  005260 
    TIM1_PSC=  005261     |     TIM1_RCR=  005264     |     TIM1_SMC=  005252 
    TIM1_SMC=  000007     |     TIM1_SMC=  000000     |     TIM1_SMC=  000001 
    TIM1_SMC=  000002     |     TIM1_SMC=  000004     |     TIM1_SMC=  000005 
    TIM1_SMC=  000006     |     TIM1_SR1=  005255     |     TIM1_SR1=  000007 
    TIM1_SR1=  000001     |     TIM1_SR1=  000002     |     TIM1_SR1=  000003 
    TIM1_SR1=  000004     |     TIM1_SR1=  000005     |     TIM1_SR1=  000006 
    TIM1_SR1=  000000     |     TIM1_SR2=  005256     |     TIM1_SR2=  000001 
    TIM1_SR2=  000002     |     TIM1_SR2=  000003     |     TIM1_SR2=  000004 
    TIM2_ARR=  00530D     |     TIM2_ARR=  00530E     |     TIM2_CCE=  005308 
    TIM2_CCE=  005309     |     TIM2_CCM=  005305     |     TIM2_CCM=  005306 
    TIM2_CCM=  005307     |     TIM2_CCR=  00530F     |     TIM2_CCR=  005310 
    TIM2_CCR=  005311     |     TIM2_CCR=  005312     |     TIM2_CCR=  005313 
    TIM2_CCR=  005314     |     TIM2_CNT=  00530A     |     TIM2_CNT=  00530B 
    TIM2_CR1=  005300     |     TIM2_EGR=  005304     |     TIM2_IER=  005301 
    TIM2_PSC=  00530C     |     TIM2_SR1=  005302     |     TIM2_SR2=  005303 
    TIM3_ARR=  00532B     |     TIM3_ARR=  00532C     |     TIM3_CCE=  005327 
    TIM3_CCE=  000000     |     TIM3_CCE=  000001     |     TIM3_CCE=  000004 
    TIM3_CCE=  000005     |     TIM3_CCE=  000000     |     TIM3_CCE=  000001 
    TIM3_CCM=  005325     |     TIM3_CCM=  005326     |     TIM3_CCM=  000000 
    TIM3_CCM=  000004     |     TIM3_CCM=  000003     |     TIM3_CCR=  00532D 
    TIM3_CCR=  00532E     |     TIM3_CCR=  00532F     |     TIM3_CCR=  005330 
    TIM3_CNT=  005328     |     TIM3_CNT=  005329     |     TIM3_CR1=  005320 
    TIM3_CR1=  000007     |     TIM3_CR1=  000000     |     TIM3_CR1=  000003 
    TIM3_CR1=  000001     |     TIM3_CR1=  000002     |     TIM3_EGR=  005324 
    TIM3_IER=  005321     |     TIM3_PSC=  00532A     |     TIM3_SR1=  005322 
    TIM3_SR2=  005323     |     TIM4_ARR=  005346     |     TIM4_CNT=  005344 
    TIM4_CR1=  005340     |     TIM4_CR1=  000007     |     TIM4_CR1=  000000 
    TIM4_CR1=  000003     |     TIM4_CR1=  000001     |     TIM4_CR1=  000002 
    TIM4_EGR=  005343     |     TIM4_EGR=  000000     |     TIM4_IER=  005341 
    TIM4_IER=  000000     |     TIM4_PSC=  005345     |     TIM4_PSC=  000000 
    TIM4_PSC=  000007     |     TIM4_PSC=  000004     |     TIM4_PSC=  000001 
    TIM4_PSC=  000005     |     TIM4_PSC=  000002     |     TIM4_PSC=  000006 
    TIM4_PSC=  000003     |     TIM4_PSC=  000000     |     TIM4_PSC=  000001 
    TIM4_PSC=  000002     |     TIM4_SR =  005342     |     TIM4_SR_=  000000 
    TIM_CR1_=  000007     |     TIM_CR1_=  000000     |     TIM_CR1_=  000006 
    TIM_CR1_=  000005     |     TIM_CR1_=  000004     |     TIM_CR1_=  000003 
    TIM_CR1_=  000001     |     TIM_CR1_=  000002     |     TOS     =  000001 
  5 Timer4Up   000001 R   |     U1      =  000003     |     U2      =  000005 
    UART1   =  000000     |     UART1_BA=  005230     |     UART1_BR=  005232 
    UART1_BR=  005233     |     UART1_CR=  005234     |     UART1_CR=  005235 
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (STMicroelectronics STM8), page 22.
Hexadecimal [24-Bits]

Symbol Table

    UART1_CR=  005236     |     UART1_CR=  005237     |     UART1_CR=  005238 
    UART1_DR=  005231     |     UART1_GT=  005239     |     UART1_PO=  000000 
    UART1_PS=  00523A     |     UART1_RX=  000004     |     UART1_SR=  005230 
    UART1_TX=  000005     |     UART3   =  000001     |     UART3_BA=  005240 
    UART3_BR=  005242     |     UART3_BR=  005243     |     UART3_CR=  005244 
    UART3_CR=  005245     |     UART3_CR=  005246     |     UART3_CR=  005247 
    UART3_CR=  004249     |     UART3_DR=  005241     |     UART3_PO=  00000F 
    UART3_RX=  000006     |     UART3_SR=  005240     |     UART3_TX=  000005 
    UART_BRR=  000002     |     UART_BRR=  000003     |     UART_CR1=  000004 
    UART_CR1=  000004     |     UART_CR1=  000002     |     UART_CR1=  000000 
    UART_CR1=  000001     |     UART_CR1=  000007     |     UART_CR1=  000006 
    UART_CR1=  000005     |     UART_CR1=  000003     |     UART_CR2=  000005 
    UART_CR2=  000004     |     UART_CR2=  000002     |     UART_CR2=  000005 
    UART_CR2=  000001     |     UART_CR2=  000000     |     UART_CR2=  000006 
    UART_CR2=  000003     |     UART_CR2=  000007     |     UART_CR3=  000006 
    UART_CR3=  000003     |     UART_CR3=  000001     |     UART_CR3=  000002 
    UART_CR3=  000000     |     UART_CR3=  000006     |     UART_CR3=  000004 
    UART_CR3=  000005     |     UART_CR4=  000007     |     UART_CR4=  000000 
    UART_CR4=  000001     |     UART_CR4=  000002     |     UART_CR4=  000003 
    UART_CR4=  000004     |     UART_CR4=  000006     |     UART_CR4=  000005 
    UART_CR5=  000008     |     UART_CR5=  000003     |     UART_CR5=  000001 
    UART_CR5=  000002     |     UART_CR5=  000004     |     UART_CR5=  000005 
    UART_CR6=  000009     |     UART_CR6=  000004     |     UART_CR6=  000007 
    UART_CR6=  000001     |     UART_CR6=  000002     |     UART_CR6=  000000 
    UART_CR6=  000005     |     UART_DR =  000001     |     UART_GTR=  000009 
    UART_PSC=  00000A     |     UART_SR =  000000     |     UART_SR_=  000001 
    UART_SR_=  000004     |     UART_SR_=  000002     |     UART_SR_=  000003 
    UART_SR_=  000000     |     UART_SR_=  000005     |     UART_SR_=  000006 
    UART_SR_=  000007     |     UBC     =  004801     |   5 USER_ABO   00000E R
    USR_BTN_=  000004     |     USR_BTN_=  000010     |     USR_BTN_=  005015 
  5 UserButt   00000D R   |     VSIZE   =  000003     |     VT      =  00000B 
    WDGOPT  =  004805     |     WDGOPT_I=  000002     |     WDGOPT_L=  000003 
    WDGOPT_W=  000000     |     WDGOPT_W=  000001     |     WWDG_CR =  0050D1 
    WWDG_WR =  0050D2     |     YSAVE   =  000002     |     ZBRANCH =  000005 
    ZLT     =  00001A     |   1 acc16      00000B R   |   1 acc24      00000A R
  1 acc8       00000C R   |   1 array_ad   000022 R   |   1 array_si   000024 R
  1 base       000007 R   |   1 basicptr   000003 R   |   5 bksp       0000A4 R
  5 branch     000209 R   |   5 bye        0001C1 R   |   5 bytecode   000170 R
  5 cfetch     00026A R   |   5 clock_in   000029 R   |   5 cold_sta   00036F R
  1 count      000002 R   |   5 cstore     000283 R   |   5 decim      000361 R
  5 delete     000227 R   |   5 dotq       000220 R   |   5 drop       0002BD R
  1 dstkptr    00001B R   |   5 dup        0002C2 R   |   5 emit       0001E5 R
  5 exec       000202 R   |   5 exit       0001FD R   |   1 farptr     000015 R
  5 fetch      000262 R   |   1 ffree      000018 R   |   1 flags      000026 R
  1 free_ram   00005C R   |   5 getchar    00009B R   |   5 hexa       000368 R
  5 hse_cloc   000063 R   |   5 hsi_cloc   00006D R   |   1 in         000001 R
  1 in.w       000000 R   |   1 in.w.sav   000013 R   |   5 key        0001CB R
  1 lineno     000005 R   |   5 lit        00024A R   |   5 litc       000258 R
  1 loop_dep   000021 R   |   5 minus      0002E2 R   |   5 mod        0002FD R
  5 mul16u     0000B4 R   |   5 neg        00031A R   |   5 next       0001B6 R
  5 nrot       0002A8 R   |   5 over       000314 R   |   3 pad        001718 R
  5 plus       0002D9 R   |   5 print_in   00010A R   |   5 prtos      000243 R
  1 ptr16      000016 R   |   1 ptr8       000017 R   |   5 putchar    000087 R
  5 puts       000090 R   |   5 qkey       0001D4 R   |   5 rot        000293 R
  1 seedx      00000F R   |   1 seedy      000011 R   |   5 slash      0002EE R
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (STMicroelectronics STM8), page 23.
Hexadecimal [24-Bits]

Symbol Table

  5 spaces     000234 R   |   3 stack_fu   001740 R   |   3 stack_un   001800 R
  5 star       00032F R   |   5 staru      00030C R   |   5 store      000274 R
  5 subr       0001ED R   |   5 swap       0002C8 R   |   1 tab_widt   000027 R
  5 test       0003CD R   |   3 tib        0016C8 R   |   1 ticks      00000D R
  5 timer4_i   00003F R   |   1 tos        000008 R   |   1 txtbgn     00001D R
  1 txtend     00001F R   |   5 uart3_in   000050 R   |   5 uart3_se   00005C R
  5 uart_ena   000075 R   |   1 vars       000028 R   |   5 warm       0003BE R
  5 zbranch    000215 R   |   5 zlt        000322 R

ASxxxx Assembler V02.00 + NoICE + SDCC mods  (STMicroelectronics STM8), page 24.
Hexadecimal [24-Bits]

Area Table

   0 _CODE      size      0   flags    0
   1 DATA       size     5C   flags    0
   2 SSEG       size      0   flags    8
   3 SSEG0      size    138   flags    8
   4 HOME       size     80   flags    0
   5 CODE       size    3DF   flags    0

